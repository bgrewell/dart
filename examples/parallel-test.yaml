---
# Test suite to demonstrate parallel execution
suite: Parallel Execution Test

# Define the nodes
nodes:
  - name: localhost
    type: local
    options:
      shell: /bin/bash

# Define the setup steps - these will demonstrate that steps on the same node run sequentially
# but if we had multiple nodes, steps would run in parallel across nodes
setup:
  - name: setup step 1 - 2 seconds
    node: localhost
    step:
      type: execute
      options:
        command: echo "Step 1 starting" && sleep 2 && echo "Step 1 done"

  - name: setup step 2 - 2 seconds
    node: localhost
    step:
      type: execute
      options:
        command: echo "Step 2 starting" && sleep 2 && echo "Step 2 done"

  - name: setup step 3 - 2 seconds
    node: localhost
    step:
      type: execute
      options:
        command: echo "Step 3 starting" && sleep 2 && echo "Step 3 done"

# Define a simple test
tests:
  - name: simple test
    node: localhost
    type: execute
    options:
      command: echo "Test completed"
      evaluate:
        exit_code: 0

# Define teardown steps
teardown:
  - name: cleanup
    node: localhost
    step:
      type: execute
      options:
        command: echo "Cleanup completed"
